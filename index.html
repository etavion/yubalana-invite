<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Video</title>
<style>
html,body{
    margin:0;
    padding:0;
    background:white;
    height:100%;
    scroll-behavior: smooth;
}

video{
    width:100vw;
    height:100vh;
    object-fit:cover;
}

.scroll-section{
    width:100vw;
    height:100vh;
    overflow:hidden;
    background:white;
}

.scroll-img{
    width:100%;
    height:100%;
    object-fit:cover;
    opacity:0;
    transform:translateY(40px);
    transition:1.2s ease;
}

.scroll-img.show{
    opacity:1;
    transform:translateY(0);
}
</style>
</head>
<body>

<!-- AUDIO HAL 1 -->
<audio id="bgm" src="audio.mp3" preload="auto"></audio>

<!-- VIDEO -->
<video id="vid" controls playsinline poster="poster.png">
    <source src="video.mp4" type="video/mp4">
</video>

<!-- GAMBAR HALAMAN -->
<section class="scroll-section" id="hal1">
    <img src="hal1.png" class="scroll-img">
</section>

<section class="scroll-section">
    <img src="hal2.png" class="scroll-img">
</section>

<section class="scroll-section">
    <img src="hal3.png" class="scroll-img">
</section>

<section class="scroll-section">
    <img src="hal4.png" class="scroll-img">
</section>

<!-- ===== HAL 5 (MAPS + TOMBOL) ===== -->
<section class="scroll-section" style="position: relative;">
    <img src="hal5.png" class="scroll-img" style="opacity:1;">
    
    <!-- Area klik PETA -->
    <a href="https://maps.app.goo.gl/vQshAaQYVgwTqB1Q9?g_st=ac" target="_blank"
       style="
         position:absolute;
         top:35%;
         left:10%;
         width:80%;
         height:25%;
         z-index:10;
       ">
    </a>

    <!-- Area klik tombol merah -->
    <a href="https://maps.app.goo.gl/vQshAaQYVgwTqB1Q9?g_st=ac" target="_blank"
       style="
         position:absolute;
         top:65%;
         left:20%;
         width:60%;
         height:10%;
         z-index:10;
       ">
    </a>
</section>

<!-- ===== HAL 6 (COPY REKENING) ===== -->
<section class="scroll-section" style="position: relative;">
    <img src="hal6.png" class="scroll-img" style="opacity:1;">

    <!-- Klik BNI -->
    <div onclick="copyText('1785665908')"
         style="
           position:absolute;
           top:33%;
           left:20%;
           width:60%;
           height:10%;
           z-index:10;
           cursor:pointer;
         ">
    </div>

    <!-- Klik ShopeePay -->
    <div onclick="copyText('087758135608')"
         style="
           position:absolute;
           top:50%;
           left:20%;
           width:60%;
           height:10%;
           z-index:10;
           cursor:pointer;
         ">
    </div>

    <!-- Klik SeaBank -->
    <div onclick="copyText('901337136988')"
         style="
           position:absolute;
           top:67%;
           left:20%;
           width:60%;
           height:10%;
           z-index:10;
           cursor:pointer;
         ">
    </div>
</section>

<!-- ===== HAL 7 ===== -->
<section class="scroll-section">
    <img src="hal7.png" class="scroll-img">
</section>

<script>
/* ===== FADE-IN GAMBAR ===== */
const imgs = document.querySelectorAll(".scroll-img");
const observer = new IntersectionObserver(entries=>{
    entries.forEach(entry=>{
        if(entry.isIntersecting) entry.target.classList.add("show");
    });
},{ threshold: 0.2 });
imgs.forEach(img => observer.observe(img));

/* ===== AUDIO HAL 1 ===== */
const bgm = document.getElementById("bgm");
const vid = document.getElementById("vid");
let audioUnlocked = false;

// Unlock audio via user gesture (tap play video)
vid.addEventListener("play", ()=>{
    if(!audioUnlocked){
        bgm.play().then(()=>{ bgm.pause(); audioUnlocked=true; }).catch(()=>{});
    }
});

const hal1 = document.getElementById("hal1");
const startMusicObserver = new IntersectionObserver(entries=>{
    entries.forEach(entry=>{
        if(entry.isIntersecting && audioUnlocked){
            bgm.play().catch(()=>{});
        }
    });
},{ threshold: 0.4 });
startMusicObserver.observe(hal1);

// Pause audio saat user keluar tab
document.addEventListener("visibilitychange", ()=>{
    if(document.hidden){
        bgm.pause();
    } else if(audioUnlocked){
        bgm.play().catch(()=>{});
    }
});

/* ===== VIDEO AUTO-PAUSE SAAT SCROLL 5px ===== */
let initialVideoScroll = 0;
let videoScrollStarted = false;

// Catat posisi scroll saat video mulai play
vid.addEventListener("play", ()=>{
    initialVideoScroll = window.scrollY;
    videoScrollStarted = true;
});

// Deteksi scroll untuk auto-pause
window.addEventListener("scroll", ()=>{
    if(videoScrollStarted && !vid.paused){
        let scrolled = Math.abs(window.scrollY - initialVideoScroll);
        if(scrolled >= 5){
            vid.pause();
            videoScrollStarted = false;
        }
    }
});

/* ===== COPY FUNCTION HAL 6 ===== */
function copyText(nomor) {
  navigator.clipboard.writeText(nomor);
  alert("Nomor berhasil disalin âœ…");
}
</script>

</body>
</html>

